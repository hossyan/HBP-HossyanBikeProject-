<mujoco model="HBP_mjcf">
  <!-- <compiler angle="radian" meshdir="assets" autolimits="true" /> -->
  <compiler angle="radian" autolimits="true" />

  <option timestep="0.002" iterations="30" cone="elliptic" impratio="100" />

  <default>
    <!-- textset -->
    <joint damping="0.001" armature="0.00001" frictionloss="0.0005"/>
    <position inheritrange="1" timeconst="0.01"/>
    <geom friction="0.4" margin="0.001" condim="3"/>
    <!-- text�[text�Fgroup=0 -->
    <default class="collision">
      <geom group="0"/>
    </default>
    <!-- text�Fgroup=1(text) -->
    <default class="visual">
      <geom contype="0" conaffinity="0" group="1"/>
    </default>
  </default>

  <asset>
    <material name="metal" rgba=".9 .95 .95 1" />
    <material name="black" rgba="0 0 0 1" />
    <material name="white" rgba="1 1 1 1" />
    <material name="gray" rgba="0.671705 0.692426 0.774270 1" />
    <mesh name="body" file="assets/body.obj" />
    <mesh name="tire_back" file="assets/tire_back.obj" />
    <mesh name="tire_holder" file="assets/tire_holder.obj" />
    <mesh name="tire_top" file="assets/tire_top.obj" />
  </asset>

<worldbody>
    <body name="body_obj" pos="0 0 0.037">
      <freejoint />
      <!-- <joint type="slide" axis="1 0 0" pos="0 0 0" name="root_x"/>
      <joint type="slide" axis="0 1 0" pos="0 0 0" name="root_y"/>
      <joint type="slide" axis="0 0 1" pos="0 0 0" name="root_z"/>
      <joint type="hinge" axis="0 1 0" pos="0 0 0" name="root_y_arg"/>
      <joint type="hinge" axis="0 0 1" pos="0 0 0" name="root_z_arg"/>
      <joint type="hinge" axis="1 0 0" pos="0 0 0" name="root_x_arg"/> -->
      <site name="imu_site" pos="-0.05 0 0.07" size="0.005"/>
      <geom class="visual" type="mesh" mesh="body" rgba="1.0 1.0 1.0 1.0" />
      <geom type="mesh" mesh="body" group="0" contype="0" conaffinity="0"/>
      <!-- <geom type="mesh" mesh="body" group="0"/> -->
      <inertial pos="-0.050997 -0.017947 0.030732" mass="0.245161" diaginertia="2.267e-4 6.820e-4 5.311e-4" />

      <!-- tire_back -->
      <body name="tire_back" pos="0.0 -0.03 -0.0075">
        <joint name="tire_back_pitch" type="hinge" pos="0 0 0" axis="0 1 0" limited="false" armature="0.00001" frictionloss="0.0005" damping="0.00001" />
        <inertial pos="0 0.002773 0" mass="0.0175" diaginertia="5.657063e-6 1.0383774e-5 5.657062e-6" />
        <!-- <geom class="visual" type="mesh" mesh="tire_back" />
          <geom type="cylinder" size="0.03 0.0055" rgba="0 0 0 0" 
                            pos="0.0015 0 0" euler="0 90 0"
                            solref="0.02 1" solimp="0.9 0.95 0.001" friction="1.6 0.005 0.0002" condim="6"
                            contype="1" conaffinity="1" />
          <geom type="mesh" mesh="tire_back" contype="0" conaffinity="0" /> -->
        <geom type="mesh" mesh="tire_back" group="0" friction="0.8 0.5 0.001"/> 
        <geom type="box" size="0.005 0.005 0.002" pos="0.02 -0.002 0" rgba="1 0 0 1"/>
      </body>

      <!-- tire_holder -->
      <body name="tire_holder" pos="-0.105 -0.0205 0.0365">
        <joint name="tire_holder_yaw" type="hinge" pos="0 0 0" axis="0 0 1" range="-3.14159 3.14159" limited="false" margin="0.0035" armature="0.00001" frictionloss="0.0005" damping="0.00001" />
        <inertial pos="-0 -0 -0.01725" mass="0.008584" diaginertia="2.66356e-6 2.280561e-6 1.309661e-6" />
        <geom class="visual" type="mesh" mesh="tire_holder" rgba="1.0 1.0 1.0 1.0" contype="0" conaffinity="0"/>
        <geom type="mesh" mesh="tire_holder" group="0" />

        <!-- tire_top キャスター化-->
        <body name="tire_top" pos="0.0 -0.0055 -0.04">
          <joint name="tire_top_pitch" type="hinge" pos="0 0 0" axis="0 1 0" limited="false" armature="0.00001" frictionloss="0.0005" damping="0.00001" />
          <inertial pos="0 0.005508 0" mass="0.0185" diaginertia="6.513973e-6 1.2471945e-5 6.513973e-6" />
          <geom class="visual" type="mesh" mesh="tire_top" rgba="1.0 1.0 1.0 1.0" />
          <geom type="mesh" mesh="tire_top" group="0" friction="0.8 0.5 0.001"/>
          <!-- <geom type="cylinder" size="0.03 0.0055" rgba="0 0 0 0" 
                            pos="0.0015 0 0" euler="0 90 0"
                            solref="0.02 1" solimp="0.9 0.95 0.001" friction="1.6 0.005 0.0002" condim="6"
                            contype="1" conaffinity="1" />
          <geom type="mesh" mesh="tire_top" contype="0" conaffinity="0" /> -->
          <geom type="box" size="0.005 0.005 0.002" pos="0.02 -0.002 0" rgba="1 0 0 1"/>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <position name="fork_controler" joint="tire_holder_yaw" gear="1" kp="100" kv="1" forcerange="-1.37 1.37" forcelimited="true"/>
    <motor name="tire_back_motor" joint="tire_back_pitch" ctrlrange="-10 10" gear="1"/>
    <motor name="tire_top_motor" joint="tire_top_pitch" ctrlrange="-10 10" gear="1"/>  
  </actuator>
  
  <sensor>
    <jointpos name="F_wheel_pos" joint="tire_holder_yaw" noise="0.0001"/>
    <jointvel name="F_wheel_vel" joint="tire_holder_yaw" noise="0.001"/>
    <jointpos name="R_wheel_pos" joint="tire_back_pitch" noise="0.0001"/>
    <jointvel name="R_wheel_vel" joint="tire_back_pitch" noise="0.001"/>
    <accelerometer name="imu" site="imu_site"/>
    <framequat name="imu_quat" objtype="site" objname="imu_site" noise="0.01"/>
    <gyro name="imu_gyro" site="imu_site" noise="0.005"/>  
    <jointactuatorfrc joint="tire_back_pitch" name="wheel_torque_sensor"/>  
  </sensor>
</mujoco>
